---
title: "NBA Prediction Documentation"
author: "Jamin Wong"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: true
    toc_depth: 3
    number_sections: true
---

# Executive Summary
1. Try to predict season win number
2. Try to predict game win / lose with stats

# Introduction

# Loading and Exploring Data

## Loading libraries required
```{r setup, message=FALSE, warning=F}
library(knitr)
library(plyr)
library(dplyr)
library(tidyr)
library(caret)
library(ggplot2)
library(corrplot)
library(stringr)
library(scales)
library(randomForest)
library(psych)
library(glmnet)
library(rpart)
library(lubridate)
library(plotly)
opts_chunk$set(echo = TRUE, cache = TRUE)
opts_chunk$set(tidy.opts = list(width.cutoff = 60), tidy = TRUE)
```

## Loading the related data files
```{r dnFi}
games_detail_df <- read.csv("files/csv/games_details.csv")
games_df <- read.csv("files/csv/games.csv")
players_df <- read.csv("files/csv/players.csv")
ranking_df <- read.csv("files/csv/ranking.csv")
teams_df <- read.csv("files/csv/teams.csv")
```

## Data Size and structure
```{r}
dim(games_detail_df)
str(games_detail_df)

dim(games_df)
str(games_df)
```


# Exploring and Understanding of data set

## Finding the types of games recorded
```{r}
length(unique(games_df$GAME_ID[(games_df$TEAM_ID_home == teams_df$TEAM_ID[which(teams_df$ABBREVIATION == "GSW")] | games_df$TEAM_ID_away == teams_df$TEAM_ID[which(teams_df$ABBREVIATION == "GSW")]) & games_df$SEASON == 2019]))
```

From the data set, Golden State Warriors played 70 games in season 2019-2020, while in fact, they only played 65 games. The data set seems to record every game including preseasons and playoff

```{r}
temp <- games_df
temp$GAME_DATE_EST <- as.POSIXlt(games_df$GAME_DATE_EST, "%Y-%m-%d", tz = "EST")
temp$Month_EST <- month(temp$GAME_DATE_EST)
temp$DAY_EST <- day(temp$GAME_DATE_EST)
temp$YEAR_EST <- year(temp$GAME_DATE_EST)
temp$MONTH_DAY <- mday(temp$GAME_DATE_EST)
temp$DAYOFYEAR <- yday(temp$GAME_DATE_EST)
sum(temp$DAYOFYEAR > 72 & temp$DAYOFYEAR < 274)
range(temp$DAYOFYEAR)
```

Game distribution throughout the year (ignore 2021-2022 season as it is incomplete)
```{r}
ggplot(temp, aes(x = DAYOFYEAR))+
  geom_histogram(binwidth = 1)

fig1 <- plot_ly(x = ~temp$DAYOFYEAR[!temp$SEASON == 2021],type = "histogram",nbinsx = 366)
fig1
```